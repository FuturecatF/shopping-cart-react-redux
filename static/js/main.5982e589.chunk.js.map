{"version":3,"sources":["redux/types.js","redux/actions.js","components/Card/Card.jsx","components/Main/Main.jsx","components/CartListFooter/CartListFooter.jsx","components/CartList/CartList.jsx","components/Cart/Cart.jsx","components/Header/Header.jsx","components/App/App.jsx","reportWebVitals.js","redux/cardsReducer.js","redux/cartReducer.js","redux/rootReducer.js","redux/sagas.js","redux/store.js","index.jsx"],"names":["REQUEST_CARDS","FETCH_CARDS","ADD_PRODUCT","REMOVE_PRODUCT","REMOVE_ITEM","addProductsToCart","item","type","payload","Card","card","dispatch","useDispatch","className","src","image","alt","name","price","onClick","Main","cards","map","Math","random","CartListFooter","totalPrice","goods","reduce","prev","next","quantity","CartList","removeItemFromCart","removeTotalItemFromCart","Cart","useSelector","state","cart","products","i","Header","totalQuantity","to","App","fetchedCards","React","useEffect","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","rootReducer","combineReducers","action","forEach","id","existingCartItem","find","filter","sagaWatcher","sagaWorker","takeEvery","call","fetchCards","put","console","log","message","a","fetch","response","json","persistConfig","key","storage","persistedReducer","persistReducer","saga","createSagaMiddleware","store","createStore","compose","applyMiddleware","persistor","persistStore","run","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5982e589.chunk.js","sourcesContent":["export const REQUEST_CARDS = 'GET/REQUEST_CARDS';\r\nexport const FETCH_CARDS = 'POST/FETCH_CARDS';\r\nexport const ADD_PRODUCT = 'CART/ADD_PRODUCT';\r\nexport const REMOVE_PRODUCT = 'CART/REMOVE_PRODUCT';\r\nexport const REMOVE_ITEM = 'CART/REMOVE_ITEM';\r\n","import {\r\n  REQUEST_CARDS,\r\n  ADD_PRODUCT,\r\n  REMOVE_PRODUCT,\r\n  REMOVE_ITEM,\r\n} from './types';\r\n\r\nexport function requestCards() {\r\n  return {\r\n    type: REQUEST_CARDS,\r\n  };\r\n}\r\n\r\nexport function addProductsToCart(item) {\r\n  return {\r\n    type: ADD_PRODUCT,\r\n    payload: item,\r\n  };\r\n}\r\n\r\nexport function removeItemFromCart(item) {\r\n  return {\r\n    type: REMOVE_PRODUCT,\r\n    payload: item,\r\n  };\r\n}\r\n\r\nexport function removeTotalItemFromCart(item) {\r\n  return {\r\n    type: REMOVE_ITEM,\r\n    payload: item,\r\n  };\r\n}\r\n","import './Card.css';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { addProductsToCart } from '../../redux/actions';\n\nfunction Card({ card }) {\n  const dispatch = useDispatch();\n\n  return (\n    <li className=\"item\">\n      <img className=\"item__image\" src={card.image} alt={card.name}></img>\n      <h2 className=\"item__title\">{card.name}</h2>\n      <p className=\"item__price\">Price {card.price} &#8381;</p>\n      <button\n        className=\"item__button\"\n        onClick={() => dispatch(addProductsToCart(card))}\n      >\n        Купить\n      </button>\n    </li>\n  );\n}\n\nexport default Card;\n","import './Main.css';\nimport React from 'react';\nimport Card from '../Card/Card';\n\nfunction Main({ cards }) {\n  return (\n    <main className=\"content\">\n      <section className=\"goods\">\n        <ul className=\"goods__container\">\n          {cards.map((card) => (\n            <Card card={card} key={Math.random()} />\n          ))}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import './CartListFooter.css';\nimport React from 'react';\n\nfunction CartListFooter({ goods }) {\n  const totalPrice = goods.reduce(\n    (prev, next) => prev + next.quantity * next.price,\n    0\n  );\n  return (\n    <section>\n      <p\n        className={`cartlist-footer ${\n          totalPrice ? 'cartlist-footer_visible' : ''\n        }`}\n      >\n        Total price is {totalPrice} &#8381;\n      </p>\n      <p\n        className={`cartlist-footer ${\n          totalPrice ? '' : 'cartlist-footer_visible'\n        }`}\n      >\n        Cart is Empty\n      </p>\n    </section>\n  );\n}\n\nexport default CartListFooter;\n","import './CartList.css';\nimport React from 'react';\nimport {\n  removeItemFromCart,\n  removeTotalItemFromCart,\n  addProductsToCart,\n} from '../../redux/actions';\nimport { useDispatch } from 'react-redux';\n\nfunction CartList({ item }) {\n  const dispatch = useDispatch();\n\n  return (\n    <li className=\"cart-item\">\n      <img className=\"cart-item__image\" src={item.image} alt={item.name}></img>\n      <h2 className=\"cart-item__title\">{item.name}</h2>\n      <p className=\"cart-item__price\">{item.price} &#8381;</p>\n      <button\n        className=\"cart-item__btn-count\"\n        onClick={() => dispatch(removeItemFromCart(item))}\n      >\n        -\n      </button>\n      <p className=\"cart-item__quantity\">{item.quantity}</p>\n      <button\n        className=\"cart-item__btn-count\"\n        onClick={() => dispatch(addProductsToCart(item))}\n      >\n        +\n      </button>\n      <button\n        className=\"cart-item__btn-delete\"\n        onClick={() => dispatch(removeTotalItemFromCart(item))}\n      >\n        Удалить товар\n      </button>\n    </li>\n  );\n}\n\nexport default CartList;\n","import './Cart.css';\nimport React from 'react';\nimport CartListFooter from '../CartListFooter/CartListFooter';\nimport { useSelector } from 'react-redux';\nimport CartList from '../CartList/CartList';\n\nfunction Cart() {\n  const goods = useSelector((state) => state.cart.products);\n\n  return (\n    <section>\n      <ul className=\"cart-items\">\n        {goods.map((item, i) => (\n          <CartList item={item} key={i} />\n        ))}\n      </ul>\n      <CartListFooter goods={goods} />\n    </section>\n  );\n}\n\nexport default Cart;\n","import './Header.css';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nfunction Header() {\n  const products = useSelector((state) => state.cart.products);\n  const totalQuantity = products.reduce(\n    (prev, next) => prev + next.quantity,\n    0\n  );\n\n  return (\n    <header className=\"header\">\n      <div className=\"header__navbar\">\n        <Link to=\"/\" className=\"link-decor\">\n          <p className=\"header__navbar-link\">Каталог</p>\n        </Link>\n        <Link to=\"/cart\" className=\"link-decor cart-position\">\n          <button className=\"header__cart\">\n            <p\n              className={`header__cart-total ${\n                totalQuantity > 0 ? 'header__cart-total_enabled' : ''\n              }`}\n            >\n              {totalQuantity}\n            </p>\n          </button>\n        </Link>\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","import './App.css';\nimport React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Main from '../Main/Main';\nimport Cart from '../Cart/Cart';\nimport Header from '../Header/Header';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { requestCards } from '../../redux/actions';\n\nfunction App() {\n  const dispatch = useDispatch();\n\n  const cards = useSelector((state) => state.cards.fetchedCards);\n\n  React.useEffect(() => {\n    dispatch(requestCards());\n  }, [dispatch]);\n\n  return (\n    <div className=\"page\">\n      <div className=\"page__container\">\n        <Header />\n        <Switch>\n          <Route exact path=\"/\">\n            <Main cards={cards} />\n          </Route>\n          <Route path=\"/cart\">\n            <Cart />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { FETCH_CARDS } from './types';\r\n\r\nconst initialState = {\r\n\tfetchedCards: [],\r\n};\r\n\r\nexport const cardsReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase FETCH_CARDS:\r\n\t\t\taction.payload.forEach((item, i) => (item.id = i + 1));\r\n\t\t\treturn { ...state, fetchedCards: action.payload };\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n","import { ADD_PRODUCT, REMOVE_PRODUCT, REMOVE_ITEM } from './types';\r\n\r\nconst initialState = {\r\n  products: [],\r\n};\r\n\r\nexport const cartReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_PRODUCT:\r\n      const existingCartItem = state.products.find(\r\n        (item) => item.id === action.payload.id\r\n      );\r\n\r\n      if (!existingCartItem) {\r\n        action.payload.quantity = 1;\r\n\r\n        return {\r\n          ...state,\r\n          products: [action.payload, ...state.products],\r\n        };\r\n      } else {\r\n        existingCartItem.quantity += 1;\r\n\r\n        return {\r\n          ...state,\r\n          products: [...state.products],\r\n        };\r\n      }\r\n\r\n    case REMOVE_PRODUCT:\r\n      if (action.payload.quantity > 1) {\r\n        action.payload.quantity -= 1;\r\n\r\n        return {\r\n          ...state,\r\n          products: [...state.products],\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          products: state.products.filter((item) => item !== action.payload),\r\n        };\r\n      }\r\n    case REMOVE_ITEM:\r\n      action.payload.quantity = 0;\r\n      return {\r\n        ...state,\r\n        products: state.products.filter((item) => item.quantity !== 0),\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { cardsReducer } from './cardsReducer';\r\nimport { cartReducer } from './cartReducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n\tcards: cardsReducer,\r\n\tcart: cartReducer,\r\n});\r\n","import { call, put, takeEvery } from '@redux-saga/core/effects';\r\nimport { REQUEST_CARDS, FETCH_CARDS } from './types';\r\n\r\nexport function* sagaWatcher() {\r\n  yield takeEvery(REQUEST_CARDS, sagaWorker);\r\n}\r\n\r\nfunction* sagaWorker() {\r\n  try {\r\n    // add loader\r\n    const payload = yield call(fetchCards);\r\n    yield put({ type: FETCH_CARDS, payload });\r\n    // remove loader\r\n  } catch (err) {\r\n    console.log({ message: err.message });\r\n  }\r\n}\r\n\r\n// перенести в Api.js\r\nexport async function fetchCards() {\r\n  const response = await fetch('https://run.mocky.io/v3/06479013-df37-452e-afe5-bb5ec47746f9');\r\n  return await response.json();\r\n}\r\n","import { applyMiddleware, compose, createStore } from 'redux';\r\nimport createSagaMiddleware from '@redux-saga/core';\r\nimport { rootReducer } from './rootReducer';\r\nimport { sagaWatcher } from './sagas';\r\nimport { persistStore, persistReducer } from 'redux-persist';\r\n\r\nimport storage from 'redux-persist/lib/storage';\r\nconst persistConfig = {\r\n\tkey: 'root',\r\n\tstorage,\r\n};\r\n\r\nexport const persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nconst saga = createSagaMiddleware();\r\n\r\nexport const store = createStore(\r\n\tpersistedReducer,\r\n\r\n\tcompose(\r\n\t\tapplyMiddleware(saga)\r\n\t)\r\n);\r\n\r\nexport const persistor = persistStore(store);\r\n\r\nsaga.run(sagaWatcher);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { HashRouter } from 'react-router-dom';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { persistor } from './redux/store';\nimport { store } from './redux/store'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<HashRouter>\n\t\t\t<Provider store={store}>\n\t\t\t\t<PersistGate persistor={persistor}>\n\t\t\t\t\t<App />\n\t\t\t\t</PersistGate>\n\t\t\t</Provider>\n\t\t</HashRouter>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}